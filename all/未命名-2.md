```mermaid
<flowchart>
  <start id="start" label="开始" />
  
  <!-- 阶段一：基于UI与LLM的模块划分 -->
  <node id="ui_extraction" label="UI元素提取\n按钮/输入框/显示框" type="process" />
  <node id="code_slicing" label="代码切片\n生成UI转移图 & 关联代码" type="process" />
  <node id="llm_description" label="LLM生成元素描述\n让AI理解每个UI组件的功能" type="process" />
  <node id="semantic_clustering" label="语义归类 & 模块聚类" type="process" />
  
  <!-- 逻辑判断：是否跨页面 -->
  <node id="module_relation" label="模块关系判定" type="decision" />
  <node id="single_page_module" label="单页面多模块\n拆分页面多功能" type="process" />
  <node id="cross_page_module" label="跨页面模块\n聚合业务流" type="process" />
  
  <!-- 最终输出 -->
  <node id="define_function_module" label="确立功能模块定义" type="process" />
  <node id="collect_code" label="ArkAnalyzer callgraph分析\n收集模块代码及函数调用" type="process" />
  <node id="sensitive_data_source" label="敏感数据获取分析\nSource API + UI输入分析" type="process" />
  <node id="data_flow_analysis" label="数据流分析\n追踪数据传播至Sink API" type="process" />
  <node id="generate_report" label="按模块生成最终隐私报告" type="process" />
  
  <!-- 连接线 -->
  <edge from="start" to="ui_extraction" />
  <edge from="ui_extraction" to="code_slicing" />
  <edge from="code_slicing" to="llm_description" />
  <edge from="llm_description" to="semantic_clustering" />
  <edge from="semantic_clustering" to="module_relation" />
  
  <edge from="module_relation" to="single_page_module" label="单页面" />
  <edge from="module_relation" to="cross_page_module" label="跨页面" />
  
  <edge from="single_page_module" to="define_function_module" />
  <edge from="cross_page_module" to="define_function_module" />
  
  <edge from="define_function_module" to="collect_code" />
  <edge from="collect_code" to="sensitive_data_source" />
  <edge from="sensitive_data_source" to="data_flow_analysis" />
  <edge from="data_flow_analysis" to="generate_report" />
</flowchart>
```